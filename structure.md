# Desktop Sorter File Structure

Below is a proposed file structure for the Desktop Sorter application, designed to keep the codebase organized, maintainable, and aligned with the high-level specification. The app is a standalone Python application for Windows, built with PyInstaller for portability, using Tkinter for the UI, and storing configuration in a JSON file.

## File Structure
```
DesktopSorter/
├── src/
│   ├── main.py                 # Entry point; initializes app and runs main loop
│   ├── ui/
│   │   ├── window.py          # Main window (2×3 grid), DnD registration, Recycle Bin, undo wiring
│   │   ├── section.py         # Section tile (label, path, validity, context menu)
│   │   ├── dialogs.py         # Overwrite, confirm recycle, select folder, text input, invalid-target prompts
│   │   └── mini_overlay.py    # (Planned) Minimize-to-overlay floating logo component
│   ├── config/
│   │   ├── config_manager.py  # Manages reading/writing JSON config for section persistence
│   │   └── defaults.py        # Defines default settings (e.g., Recycle Bin section)
│   ├── services/
│   │   ├── dragdrop.py        # tkinterdnd2 bridge (DropEnter/Leave/Drop, data normalization)
│   │   ├── win_integration.py # HWND, always-on-top, WS_EX_TRANSPARENT pass-through
│   │   ├── undo.py            # Session-only multi-level undo of file ops
│   │   └── recycle_bin.py     # IFileOperation (preferred) / SHFileOperation fallback
│   └── file_handler/
│       ├── file_operations.py # Threaded moves, conflict handling, UI-thread prompts
│       └── error_handler.py   # Maps exceptions to user-friendly messages and logs
├── resources/
│   ├── icon.png               # Icon for the minimized floating icon
│   └── default_config.json    # Template JSON config (optional, for first-time setup)
├── dist/
│   ├── DesktopSorter.exe      # Standalone executable (generated by PyInstaller)
│   └── config.json            # User config file (stored in AppData during runtime)
├── requirements.txt           # Lists dependencies (e.g., tkinter, pywin32 for Windows APIs)
├── README.md                  # Basic app description, usage, and build instructions
├── LICENSE                    # License file (e.g., MIT for a free app)
└── pyinstaller.spec           # PyInstaller configuration for building the standalone .exe
```

## File Descriptions
- **src/main.py**: The main script that initializes the app, sets up the Tkinter root window, and coordinates between UI, config, and file handling modules.
- **src/ui/window.py**: Main window with 2×3 section grid, DnD setup, Recycle Bin target, undo wiring, and pass-through coordination.
- **src/ui/section.py**: Section tile UI + logic: label/path management, validity state, tooltips, and context menu (Change/Rename/Remove; Reset planned).
- **src/ui/dialogs.py**: Dialogs: overwrite/skip/cancel, recycle confirmation, folder picker, text input, and invalid-target prompts.
- **src/config/config_manager.py**: Handles reading/writing section configurations (labels, paths) to a JSON file in the user's AppData folder.
- **src/config/defaults.py**: Stores default settings, such as the Recycle Bin section's path and label.
- **src/file_handler/file_operations.py**: Threaded move operations with conflict handling and main-thread prompts.
- **src/file_handler/error_handler.py**: Maps exceptions to user-friendly messages; logs with appropriate severity.
- **resources/icon.png**: App icon; used by the minimize overlay (scaled based on screen resolution).
- **resources/default_config.json**: Optional template for initial config setup (e.g., predefining the Recycle Bin section).
- **dist/DesktopSorter.exe**: The compiled standalone executable, generated by PyInstaller for portability.
- **dist/config.json**: The runtime user configuration file, stored in `C:/Users/<User>/AppData/Roaming/DesktopSorter/`.
- **requirements.txt**: Lists Python dependencies (e.g., `pywin32` for Windows-specific drag-and-drop and always-on-top functionality).
- **README.md**: Provides a brief overview, usage instructions, and how to build the app from source.
- **LICENSE**: A simple open-source license (e.g., MIT) for the free app.
- **pyinstaller.spec**: Configuration file for PyInstaller to bundle the app into a single .exe, including resources like the icon.

## Notes
- **Portability**: The `dist/DesktopSorter.exe` is the primary deliverable, requiring no Python installation. The `config.json` is created in AppData at runtime, ensuring the app remains portable.
- **AppData Path**: The config file is stored at `C:/Users/<User>/AppData/Roaming/DesktopSorter/config.json` to comply with Windows conventions and avoid cluttering the user's directory.
- **Modularity**: The structure separates concerns (UI, file operations, config) for easier maintenance and potential future enhancements.
- **Dependencies**: Minimal, likely just `tkinter` (built-in) and `pywin32` for Windows-specific features like drag-and-drop from Explorer.

This structure reflects the current codebase (floating window with 2×3 sections, drag-and-drop, persistence, undo, Recycle Bin) and planned additions (minimize overlay, context-menu hardening, invalid-paths UX).
